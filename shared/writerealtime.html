<head>
  <title>WriteRealtime - Meteorjs contenteditable demo</title>
</head>

<body>
</body>

<template name="layout">
	<div class="container">
		<header>
			{{> nav}}
		</header>
		{{> yield}}
	</div>
</template>

<template name="nav">
	<button class="btn btn-primary add-new-article">Add New Article</button>
	<a class="btn btn-default github-link" href="https://github.com/bobbigmac/write-realtime">View on github</a>
</template>

<template name="fragmenttagp">
	<p contenteditable="true" data-id="{{this._id}}" class="fragment-text">{{this.text}}</p>
</template>

<template name="fragmenttagh1">
	<h1 contenteditable="true" data-id="{{this._id}}" class="fragment-text">{{this.text}}</h1>
</template>

<template name="fragmenttagh2">
	<h2 contenteditable="true" data-id="{{this._id}}" class="fragment-text">{{this.text}}</h2>
</template>

<template name="fragment">
	<div class="fragment-container">
		<div class="handle"><i class="glyphicon glyphicon-th-list"> </i></div>
		{{#if equals tag "p"}}
			{{>fragmenttagp}}
		{{else}}
			{{#if equals tag "h1"}}
				{{>fragmenttagh1}}
			{{else}}
				{{#if equals tag "h2"}}
					{{>fragmenttagh2}}
				{{else}}
					{{>fragmenttagp}}
				{{/if}}
			{{/if}}
		{{/if}}
	</div>
</template>

<template name="articles">
	{{#each articles}}
		{{>articleLink}}
	{{/each}}
</template>

<template name="articleLink">
	<p><a href="{{linkUrl}}">{{linkText}}</a></p>
</template>

<template name="article">
	<div class="fragments" data-id="{{this._id}}">
		{{#each fragments}}
			{{>fragment}}
		{{/each}}
	</div>
</template>
